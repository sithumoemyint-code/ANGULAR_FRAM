<div class="p-2">
  <div class="p-4 flex justify-between items-center bg-[#FFFFFF] w-full">
    <p class="text-[#F8AA00] text-[18px]">
      {{ "UI_MANAGEMENT" | translate }}
      <span class="text-[#000000] text-[18px]"
        >> {{ "BANNER_MANAGEMENT" | translate }}</span
      >
    </p>
    <button
      *appHasPermission="{
        permission: 'CREATE',
        pageComponent: 'Banner Management'
      }"
      (click)="routeToCreatePage()"
      type="button"
      class="rounded-full border border-[#235884] px-4 py-2 hover:cursor-pointer"
    >
      <div class="flex justify-center items-center space-x-1">
        <img src="assets/icons/plus.png" alt="" class="w-[18px]" />
        <p>{{ "CREATE" | translate }}</p>
      </div>
    </button>
  </div>
  <div class="bg-[#FFFFFF] rounded-2xl shadow-md p-6 mt-4 mx-4">
    <form action="" [formGroup]="searchForm">
      <div class="grid grid-cols-3 gap-5">
        <div class="p-1">
          <app-input
            [label]="'BANNER_NAME' | translate"
            inputId="email"
            formControlName="title"
            (keydown)="onKeyDown($event)"
          ></app-input>
        </div>
        <div class="p-1">
          <app-input
            [label]="'FROM_DATE' | translate"
            inputId="fromTime"
            formControlName="fromTime"
            type="date"
          ></app-input>
        </div>
        <div class="p-1">
          <app-input
            [label]="'TO_DATE' | translate"
            inputId="toTime"
            formControlName="toTime"
            type="date"
          ></app-input>
        </div>
        <div class="p-1">
          <app-select
            [label]="'STATUS' | translate"
            selectId="test"
            [options]="selectStatus"
            formControlName="status"
            controlName="status"
          ></app-select>
        </div>
        <div></div>
        <div class="p-1 flex justify-center items-center space-x-6 mt-2">
          <button
            (click)="reset()"
            class="text-[#F7AA00] border border-[#F7AA00] px-4 py-2 rounded-full"
          >
            <div class="flex justify-center items-center space-x-1">
              <img
                src="assets/icons/refresh-icon.png"
                alt=""
                class="w-[18px]"
              />
              <p>{{ "RESET" | translate }}</p>
            </div>
          </button>
          <button
            class="bg-[#F7AA00] text-white px-4 py-2 rounded-full"
            (click)="search()"
          >
            <div class="flex justify-center items-center space-x-1">
              <img src="assets/icons/search.png" alt="" class="w-[18px]" />
              <p>{{ "SEARCH" | translate }}</p>
            </div>
          </button>
        </div>
      </div>
    </form>
  </div>
  <div class="mt-8 mx-4">
    <table class="w-full bg-white">
      <thead class="bg-[#E7EEF4] h-20 text-[#565D6D] uppercase">
        <tr>
          <th class="text-center px-4">{{ "NO" | translate }}</th>
          <th class="text-center px-4">{{ "NEWST_TITLE" | translate }}</th>
          <th class="text-center px-4">{{ "NEWST_IMAGE" | translate }}</th>
          <th class="text-center px-4">{{ "NEWST_STATUS" | translate }}</th>
          <th class="text-center px-4">{{ "START_DATE_T" | translate }}</th>
          <th class="text-center px-4">{{ "END_DATE_T" | translate }}</th>
          <th class="text-center px-4">{{ "PRIORITY" | translate }}</th>
          <th class="text-center px-4">{{ "ACTION" | translate }}</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngIf="banners.length; else emptyResult">
          <tr
            class="border-b h-36 text-[14px] text-[#687489]"
            *ngFor="let banner of banners; let i = index"
          >
            <td class="text-center px-4">{{ offset * size + (i + 1) }}</td>
            <td class="text-center px-4">{{ banner.title }}</td>
            <td class="text-center px-4">
              <div class="flex justify-center items-center">
                <img
                  [src]="banner.imageUrl"
                  class="rounded-lg w-[220px] h-[90px]"
                />
              </div>
            </td>

            <td class="text-center px-4">
              <label class="inline-flex items-center cursor-pointer">
                <div
                  class="switch"
                  [class.checked]="banner.status === 'ACTIVE'"
                  (click)="onChangeStatus(banner)"
                >
                  <div class="toggle"></div>
                </div>
              </label>
            </td>

            <td class="text-center px-4">{{ banner.fromTime }}</td>
            <td class="text-center px-4">{{ banner.toTime }}</td>
            <td class="text-center px-4">{{ banner.priority }}</td>
            <td class="text-center px-4">
              <div class="flex justify-center items-center space-x-4">
                <button
                  *appHasPermission="{
                    permission: 'EDIT',
                    pageComponent: 'Banner Management'
                  }"
                  (click)="onEditBanner(banner)"
                >
                  <img
                    src="assets/icons/edit-icon.png"
                    alt=""
                    class="w-[20px]"
                  />
                </button>
                <button
                  *appHasPermission="{
                    permission: 'DELETE',
                    pageComponent: 'Banner Management'
                  }"
                  (click)="deleteBanner(banner)"
                >
                  <img
                    src="assets/icons/trash-icon.png"
                    alt=""
                    class="w-[20px]"
                  />
                </button>
              </div>
            </td>
          </tr>
        </ng-container>
        <ng-template #emptyResult>
          <tr>
            <td colspan="8" class="py-16">
              <div
                *ngIf="!isLoading"
                class="flex items-start justify-center w-full"
              >
                <mat-icon svgIcon="heroicons_solid:inbox"></mat-icon>
                <p>{{ "NO_SEARCH_RESULT" | translate }}</p>
              </div>
              <div *ngIf="isLoading">
                <span class="flex justify-center">
                  <mat-spinner [diameter]="30"></mat-spinner>
                </span>
              </div>
            </td>
          </tr>
        </ng-template>
      </tbody>
    </table>
  </div>

  <app-paginator
    [offset]="offset"
    [totalOffset]="totalOffset"
    (change)="search($event)"
  ></app-paginator>
</div>
