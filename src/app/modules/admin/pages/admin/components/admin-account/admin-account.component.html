<div class="p-2">
  <div class="p-4 flex justify-between items-center bg-[#FFFFFF] w-full">
    <p class="text-[#F8AA00] text-[18px]">
      {{ "ADMIN" | translate }}
      <span class="text-[#000000] text-[18px]">
        > {{ "ADMIN_ACC" | translate }}</span
      >
    </p>
    <button
      *appHasPermission="{
        permission: 'CREATE',
        pageComponent: 'Admin Management'
      }"
      (click)="create()"
      class="rounded-full border border-[#235884] px-3 py-2 hover:cursor-pointer"
    >
      <div class="flex justify-center items-center space-x-1">
        <img src="assets/icons/plus.png" alt="" class="w-[18px]" />
        <p>{{ "ADD_NEW" | translate }}</p>
      </div>
    </button>
  </div>

  <div class="bg-[#FFFFFF] rounded-lg shadow-md p-6 mt-8 mx-4">
    <form [formGroup]="searchTable">
      <div class="grid grid-cols-3 gap-5">
        <div class="p-1">
          <app-input
            [label]="'NAME' | translate"
            inputId="name"
            formControlName="name"
            (keydown)="onKeyDown($event)"
          ></app-input>
        </div>
        <div class="p-1">
          <app-input
            [label]="'EMAILL' | translate"
            inputId="email"
            formControlName="email"
            (keydown)="onKeyDown($event)"
          ></app-input>
        </div>
        <div class="p-1">
          <ng-container *ngIf="selectStatus.length; else emptyStatus">
            <app-select
              [label]="'STATUS' | translate"
              selectId="accountStatus"
              [options]="selectStatus"
              formControlName="accountStatus"
              controlName="accountStatus"
            ></app-select>
          </ng-container>
          <ng-template #emptyStatus>
            <app-loading [condition]="'input'"></app-loading>
          </ng-template>
        </div>

        <div></div>
        <div></div>
        <div class="p-1 flex justify-end space-x-4 mt-2">
          <button
            class="text-[#F7AA00] border border-[#F7AA00] px-4 py-2 rounded-full"
            (click)="reset()"
          >
            <div class="flex justify-center items-center space-x-1">
              <img
                src="assets/icons/refresh-icon.png"
                alt=""
                class="w-[18px]"
              />
              <p class="whitespace-nowrap">{{ "RESET" | translate }}</p>
            </div>
          </button>
          <button
            (click)="search()"
            class="bg-[#F7AA00] text-white px-4 py-2 rounded-full"
          >
            <div class="flex justify-center items-center space-x-1">
              <img src="assets/icons/search.png" alt="" class="w-[18px]" />
              <p class="whitespace-nowrap">{{ "SEARCH" | translate }}</p>
            </div>
          </button>
        </div>
      </div>
    </form>
  </div>

  <div class="my-8 mx-4">
    <table class="w-full">
      <thead class="bg-[#E7EEF4] h-20 uppercase">
        <tr>
          <th class="text-center text-base text-[#565D6D] px-4">
            {{ "NO" | translate }}
          </th>
          <th class="text-center text-base text-[#565D6D] px-4">
            {{ "NAMEL" | translate }}
          </th>
          <th class="text-center text-base text-[#565D6D] px-4">
            {{ "EMAIL" | translate }}
          </th>
          <th class="text-center text-base text-[#565D6D] px-4">
            {{ "ROLEL" | translate }}
          </th>
          <th class="text-center text-base text-[#565D6D] px-4">
            {{ "CREATED_BY" | translate }}
          </th>
          <th class="text-center text-base text-[#565D6D] px-4">
            {{ "NEWST_STATUS" | translate }}
          </th>
          <th class="text-center text-base text-[#565D6D] px-4">
            {{ "ACTION" | translate }}
          </th>
        </tr>
      </thead>
      <tbody class="text-[#687489]">
        <ng-container *ngIf="adminAccData.length; else emptyResult">
          <tr
            class="border-b h-16"
            *ngFor="let item of adminAccData; let i = index"
          >
            <td class="text-center text-[#687489] text-sm px-4">
              {{ offset * size + (i + 1) }}
            </td>
            <td class="text-center text-[#687489] text-sm px-4">
              {{ item.name }}
            </td>
            <td class="text-center text-[#687489] text-sm px-4">
              {{ item.email }}
            </td>
            <td class="text-center text-[#687489] text-sm px-4">
              {{ item.role }}
            </td>
            <td class="text-center text-[#687489] text-sm px-4">
              {{ changeFrontNumber(item.createBy) }}
            </td>
            <td
              class="text-center text-[#687489] px-4 pt-4 flex gap-3 items-center justify-center"
            >
              <span
                class="text-xs text-white rounded-xl py-1"
                [ngClass]="
                  item.status ? 'bg-green-500  px-4  ' : 'bg-[#A0A2A9]  px-2  '
                "
              >
                <ng-container *ngIf="item.status; else elseStatus">
                  ACTIVE
                </ng-container>
                <ng-template #elseStatus> INACTIVE </ng-template>
              </span>
              <label class="inline-flex items-center cursor-pointer">
                <div
                  class="switch"
                  [class.checked]="item.status"
                  (click)="onToggle(item.accountId, item)"
                >
                  <div class="toggle"></div>
                </div>
              </label>
            </td>
            <td class="text-center text-[#687489] px-4">
              <div class="flex justify-center items-baseline space-x-4">
                <button (click)="info(item)">
                  <img
                    src="assets/icons/info-circle-icon.png"
                    alt="detail-icon"
                    class="w-[18px] mb-2"
                    title="Detail"
                  />
                </button>

                <!-- <button (click)="edit(item)">
                  <mat-icon  
                    matListItemIcon 
                    class="cursor-pointer"
                    style="color: #989898;"
                  >edit</mat-icon>
                </button>
                -->
                <button
                  *appHasPermission="{
                    permission: 'DELETE',
                    pageComponent: 'Admin Management'
                  }"
                  (click)="delete(item.accountId)"
                >
                  <img
                    src="assets/icons/trash-icon.png"
                    alt="trash-icon"
                    class="w-[18px] mb-2"
                    title="Delete"
                  />
                </button>
              </div>
            </td>
          </tr>
        </ng-container>
        <ng-template #emptyResult>
          <tr>
            <td colspan="7" class="py-16">
              <div
                *ngIf="!isLoading"
                class="flex items-start justify-center w-full"
              >
                <mat-icon svgIcon="heroicons_solid:inbox"></mat-icon>
                <p>{{ "NO_SEARCH_RESULT" | translate }}</p>
              </div>
              <div *ngIf="isLoading">
                <span class="flex justify-center">
                  <mat-spinner [diameter]="30"></mat-spinner>
                </span>
              </div>
            </td>
          </tr>
        </ng-template>
      </tbody>
    </table>
    <app-paginator
      [offset]="offset"
      [totalOffset]="totalOffset"
      (change)="search($event)"
    ></app-paginator>
  </div>
</div>
